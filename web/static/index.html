<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>EduFlow 交互控制台</title>
  <meta name="description" content="EduFlow 沉浸式教学卡片自动生成工具，将教学剧本转为智慧树平台卡片。">
  <!-- 收藏夹与标签页图标 -->
  <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Crect width='32' height='32' rx='6' fill='%238FA989'/%3E%3Cpath fill='white' d='M8 9h16v1.5H8zm0 5h14v1.5H8zm0 5h10v1.5H8z'/%3E%3C/svg%3E">
  <!-- 链接预览（Edge/社交分享等） -->
  <meta property="og:type" content="website">
  <meta property="og:title" content="EduFlow 交互控制台">
  <meta property="og:description" content="EduFlow 沉浸式教学卡片自动生成工具，将教学剧本转为智慧树平台卡片。">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;600&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/mammoth@1.6.0/mammoth.browser.min.js"></script>
  <link rel="stylesheet" href="/static/css/app.css">
</head>
<body>
  <div id="authScreen" class="auth-screen hidden" aria-label="登录或注册">
    <div class="auth-panel">
      <h1 class="auth-logo">EduFlow</h1>
      <p class="auth-hint">登录后使用您的专属工作区，历史记录将保留。</p>
      <div id="authTabs" class="auth-tabs">
        <button type="button" class="auth-tab active" data-tab="login">登录</button>
        <button type="button" class="auth-tab" data-tab="register">注册</button>
        <button type="button" class="auth-tab" data-tab="forgot">找回密码</button>
      </div>
      <form id="loginForm" class="auth-form">
        <label for="loginIdentifier">邮箱</label>
        <input type="text" id="loginIdentifier" name="identifier" autocomplete="username" required placeholder="用于登录的邮箱">
        <label for="loginPassword">密码</label>
        <div class="auth-pwd-wrap">
          <input type="password" id="loginPassword" name="password" autocomplete="current-password" required placeholder="请输入密码">
          <button type="button" class="auth-pwd-eye" id="loginPwdEye" title="显示密码" aria-label="显示密码"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/></svg></button>
        </div>
        <div id="loginMsg" class="auth-msg err"></div>
        <button type="submit" class="auth-submit">登录</button>
        <p class="auth-link-row"><a href="#" id="linkForgotPassword">忘记密码？</a></p>
      </form>
      <form id="registerForm" class="auth-form" style="display:none">
        <label for="registerEmail">邮箱</label>
        <input type="email" id="registerEmail" name="email" autocomplete="email" required placeholder="用于登录与找回密码">
        <label for="registerPassword">密码</label>
        <div class="auth-pwd-wrap">
          <input type="password" id="registerPassword" name="password" autocomplete="new-password" required placeholder="至少 6 位">
          <button type="button" class="auth-pwd-eye" id="regPwdEye" title="显示密码" aria-label="显示密码"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/></svg></button>
        </div>
        <label for="registerPasswordAgain">再次输入密码</label>
        <div class="auth-pwd-wrap">
          <input type="password" id="registerPasswordAgain" name="password_again" autocomplete="new-password" required placeholder="请再输入一次密码">
          <button type="button" class="auth-pwd-eye" id="regPwdAgainEye" title="显示密码" aria-label="显示密码"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/></svg></button>
        </div>
        <div id="registerMsg" class="auth-msg err"></div>
        <button type="submit" class="auth-submit">注册</button>
      </form>
      <form id="forgotForm" class="auth-form" style="display:none">
        <label for="forgotIdentifier">邮箱</label>
        <input type="text" id="forgotIdentifier" name="identifier" autocomplete="username" placeholder="请输入注册时使用的邮箱">
        <div id="forgotMsg" class="auth-msg err"></div>
        <div id="forgotSuccess" class="auth-msg ok" style="display:none"></div>
        <div id="forgotResetLink" class="auth-reset-link" style="display:none"></div>
        <button type="submit" class="auth-submit">发送重置链接</button>
        <p class="auth-link-row"><a href="#" id="linkBackToLogin">返回登录</a></p>
      </form>
      <form id="resetForm" class="auth-form" style="display:none">
        <p class="auth-hint">请设置新密码，链接有效期为 1 小时。</p>
        <input type="hidden" id="resetToken" name="token">
        <label for="resetNewPassword">新密码</label>
        <div class="auth-pwd-wrap">
          <input type="password" id="resetNewPassword" name="new_password" autocomplete="new-password" required placeholder="至少 6 位">
          <button type="button" class="auth-pwd-eye" id="resetPwdEye" title="显示密码" aria-label="显示密码"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/></svg></button>
        </div>
        <label for="resetNewPasswordAgain">再次输入新密码</label>
        <div class="auth-pwd-wrap">
          <input type="password" id="resetNewPasswordAgain" name="new_password_again" autocomplete="new-password" required placeholder="请再输入一次">
          <button type="button" class="auth-pwd-eye" id="resetPwdAgainEye" title="显示密码" aria-label="显示密码"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/></svg></button>
        </div>
        <div id="resetMsg" class="auth-msg err"></div>
        <button type="submit" class="auth-submit">确认并重置密码</button>
        <p class="auth-link-row"><a href="#" id="linkResetBackToLogin">返回登录</a></p>
      </form>
      <p class="auth-link-row auth-skip"><button type="button" id="btnSkipAuth" class="auth-skip-btn">暂不登录，继续使用</button></p>
    </div>
  </div>
  <div id="historyFilesModal" class="modal-overlay" aria-hidden="true">
    <div class="modal-panel history-files-panel">
      <div class="preview-header">
        <strong>历史生成文件</strong>
        <button type="button" id="btnCloseHistoryFiles" class="btn-icon" title="关闭" aria-label="关闭">×</button>
      </div>
      <div class="history-files-toolbar">
        <label class="history-files-sort">
          <span>按时间</span>
          <select id="historyFilesSortOrder">
            <option value="newest">最新优先</option>
            <option value="oldest">最早优先</option>
          </select>
        </label>
        <button type="button" id="btnRefreshHistoryFiles" class="btn-secondary" title="刷新列表">刷新</button>
      </div>
      <div class="history-files-tabs">
        <button type="button" class="history-files-tab active" data-category="cards">卡片</button>
        <button type="button" class="history-files-tab" data-category="reports">评估报告</button>
        <button type="button" class="history-files-tab" data-category="other">其他</button>
      </div>
      <div id="historyFilesContent" class="history-files-content">
        <div id="historyFilesCards" class="history-files-list" data-category="cards"></div>
        <div id="historyFilesReports" class="history-files-list" data-category="reports" style="display:none"></div>
        <div id="historyFilesOther" class="history-files-list" data-category="other" style="display:none"></div>
      </div>
      <p id="historyFilesEmpty" class="history-files-empty hint" style="display:none">当前分类下暂无文件</p>
    </div>
  </div>
  <div id="settingsModal" class="modal-overlay" aria-hidden="true">
    <div class="modal-panel settings-panel-large">
      <nav class="settings-nav">
        <button type="button" class="settings-nav-item active" data-settings-page="llm">API 与模型</button>
        <button type="button" class="settings-nav-item" data-settings-page="wallpaper">外观（壁纸）</button>
      </nav>
      <div class="settings-content-wrap">
        <button type="button" id="btnCloseSettings" class="modal-close btn-icon">×</button>
        <div id="settingsPageLlm" class="settings-panel-page active">
          <h3>API 与模型</h3>
          <p class="hint">解析剧本、生成卡片与迭代优化均使用此处配置。请填写您自己的 API Key。</p>
          <label>API Key</label>
          <input type="password" id="llmApiKey" placeholder="留空则保持已保存的值" autocomplete="off">
          <span id="llmApiKeyMasked" class="hint"></span>
          <label>模型</label>
          <select id="llmModelType">
            <option value="deepseek">DeepSeek</option>
            <option value="doubao">豆包</option>
            <option value="openai">OpenAI 兼容（自定义）</option>
          </select>
          <div id="llmCustomFields" style="display:none">
            <label>Base URL</label>
            <input type="text" id="llmBaseUrl" placeholder="https://api.openai.com/v1">
            <label>Model 名称</label>
            <input type="text" id="llmModelName" placeholder="gpt-4o">
          </div>
          <button type="button" id="btnSaveLlmConfig">保存 LLM 配置</button>
          <div id="llmConfigMsg" class="msg"></div>
        </div>
        <div id="settingsPageWallpaper" class="settings-panel-page">
          <h3>外观</h3>
          <label>色系</label>
          <div id="themeSelector" class="theme-selector">
            <label class="theme-option"><input type="radio" name="theme" value="natsume"> 默认（Natsume）</label>
            <label class="theme-option"><input type="radio" name="theme" value="soft"> 柔和</label>
            <label class="theme-option"><input type="radio" name="theme" value="muted"> 低对比</label>
            <label class="theme-option"><input type="radio" name="theme" value="cool"> 冷色</label>
          </div>
          <label style="margin-top:1.25rem;">壁纸</label>
          <div id="wallpaperPreview" class="wallpaper-preview"><span class="no-preview">当前未设置壁纸</span></div>
          <div id="wallpaperDropZone" class="drop-zone">将图片拖至此处，或点击选取</div>
          <input type="file" id="wallpaperFile" accept="image/*">
          <button type="button" id="btnClearWallpaper" style="margin-top:0.5rem">清除壁纸</button>
        </div>
      </div>
    </div>
  </div>
  <div id="wallpaperEditorModal" class="modal-overlay" aria-hidden="true">
    <div class="modal-panel wallpaper-editor-panel">
      <div class="preview-header">
        <strong>调整壁纸位置与缩放</strong>
        <button type="button" id="btnCloseWallpaperEditor" class="btn-icon" title="关闭">×</button>
      </div>
      <div class="wallpaper-editor-body">
        <div id="wallpaperEditorViewport" class="wallpaper-editor-viewport">
          <span id="wallpaperEditorLoading" class="wallpaper-editor-loading">加载中…</span>
          <canvas id="wallpaperEditorCanvas"></canvas>
        </div>
        <div class="wallpaper-editor-controls">
          <span class="wallpaper-editor-label">缩放</span>
          <button type="button" id="btnWallpaperZoomOut" class="qabtn" title="缩小">-</button>
          <input type="range" id="wallpaperZoomRange" min="50" max="250" value="100">
          <button type="button" id="btnWallpaperZoomIn" class="qabtn" title="放大">+</button>
          <span class="wallpaper-editor-zoom-value" id="wallpaperZoomValue">100%</span>
        </div>
        <div class="wallpaper-editor-hint hint">
          在上方区域拖动图片以调整位置，或使用缩放控制栏放大/缩小，然后点击「使用此区域」。
        </div>
        <div class="wallpaper-editor-actions">
          <button type="button" id="btnWallpaperApply" class="btn-primary">使用此区域作为壁纸</button>
          <button type="button" id="btnWallpaperCancel" class="btn-secondary">取消</button>
        </div>
      </div>
    </div>
  </div>
  <div id="previewModal" class="modal-overlay" aria-hidden="true">
    <div class="modal-panel">
      <div class="preview-header">
        <strong id="previewModalTitle">预览</strong>
        <button type="button" id="btnClosePreview" class="btn-icon">×</button>
      </div>
      <div id="previewModalBody" class="preview-body"></div>
    </div>
  </div>
  <div id="contentEditModal" class="modal-overlay" aria-hidden="true" aria-labelledby="contentEditModalTitle">
    <div class="modal-panel content-edit-panel">
      <div class="preview-header">
        <div style="display:flex;align-items:center;gap:0.75rem;">
          <strong id="contentEditModalTitle">编辑</strong>
        </div>
        <div style="display:flex;align-items:center;gap:0.25rem;">
          <button type="button" id="btnContentEditDownload" class="qabtn" style="display:none;" title="下载当前文件">下载</button>
          <button type="button" id="btnContentEditSave" class="qabtn">保存</button>
          <button type="button" id="btnCloseContentEdit" class="btn-icon">×</button>
        </div>
      </div>
      <div id="contentEditModalBody" class="card-edit-modal-body">
        <div id="contentEditModalPreview" style="display:none;flex:1;min-height:400px;overflow:auto;"></div>
        <textarea id="contentEditModalTextarea" class="card-editor" style="flex:1;min-height:400px;width:100%;resize:vertical;" placeholder="加载中…"></textarea>
        <div id="contentEditExtra" style="display:none;flex-shrink:0;margin-top:auto;padding-top:0.5rem;justify-content:flex-end;align-items:center;flex-direction:row;">
          <button type="button" id="btnContentEditSaveAs" class="qabtn">保存</button>
        </div>
        <div id="contentEditModalMsg" class="msg" style="flex-shrink:0;margin-top:0.5rem;"></div>
      </div>
    </div>
  </div>
  <div class="main-content">
  <div class="main-content-inner">
  <header class="header">
    <h1>EduFlow 交互控制台</h1>
    <p class="nav">
      <span id="authUserSpan" class="auth-user-span" style="display:none"></span>
      <button type="button" id="btnShowAuth" class="btn-icon" title="登录或注册，管理工作区与历史文件">登录 / 管理工作区</button>
      <button type="button" id="btnSettings" class="btn-icon" title="网页设置">⚙ 设置</button>
      <button type="button" id="btnHistoryFiles" class="btn-icon" title="历史生成文件" style="display:none">📁 历史生成文件</button>
      <button type="button" id="btnLogout" class="btn-icon" title="退出登录" style="display:none">退出</button>
    </p>
  </header>

  <div id="mainConsoleView">
  <section class="collapsible-section" data-section="1">
  <div class="section-header" role="button" tabindex="0" aria-expanded="true">
    <span class="section-chevron">▼</span>
    <h2>1. 剧本与生成</h2>
  </div>
  <div class="section-body">
  <label>拖入或点选原文档（剧本）</label>
  <div id="scriptDropZone" class="drop-zone script-dropzone" data-empty-text="将 .md / .docx / .doc / .pdf 拖至此处，或点击选取">
    <span id="scriptDropZoneText">将 .md / .docx / .doc / .pdf 拖至此处，或点击选取</span>
    <span id="scriptDropZoneHint" class="script-dropzone-hint" style="display:none">点击或拖入新文件可更换</span>
  </div>
  <input type="file" id="scriptFile" accept=".md,.docx,.doc,.pdf">
  <div class="gen-cards-row">
    <button type="button" id="btnGenCards" disabled title="请先上传并解析剧本，再生成卡片">生成卡片</button>
    <button type="button" id="btnGenPersonaFromScript" class="btn-secondary" disabled title="使用上方已选剧本生成学生人设，并自动添加到人设库">生成学生人设</button>
  </div>
  <div id="uploadMsg" class="msg"></div>
  <div id="personaGenMsg" class="msg" style="margin-top:0.25rem;"></div>
  <div id="cardGenProgressWrap" class="card-gen-progress" style="display:none;margin-top:0.5rem;">
    <div style="display:flex;justify-content:space-between;font-size:0.85rem;color:var(--natsume-ink-light);">
      <span id="cardGenProgressMsg">准备中…</span>
      <span id="cardGenProgressPct">0%</span>
    </div>
    <div style="height:6px;background:var(--natsume-border);border-radius:3px;overflow:hidden;margin-top:0.25rem;">
      <div id="cardGenProgressBar" style="height:100%;width:0%;background:var(--natsume-leaf);transition:width 0.3s;"></div>
    </div>
    <div class="card-gen-stream-label" style="margin-top:0.6rem;font-size:0.85rem;color:var(--natsume-ink);font-weight:600;">生成进度</div>
    <div id="cardGenStreamPreview" class="card-gen-stream-preview" style="margin-top:0.35rem;max-height:300px;overflow:auto;background:var(--natsume-bg);border:1px solid var(--natsume-border);border-radius:8px;padding:0.75rem;font-size:0.8rem;line-height:1.4;white-space:pre-wrap;word-break:break-word;color:var(--natsume-ink);"></div>
  </div>
  <div id="uploadQuickActions" class="quick-actions" style="display:none;margin-top:0.5rem;"></div>

  </div>
  </section>

  <section class="collapsible-section" data-section="2">
  <div class="section-header" role="button" tabindex="0" aria-expanded="true">
    <span class="section-chevron">▼</span>
    <h2>2. 智慧树平台（配置与注入）</h2>
  </div>
  <div class="section-body">
    <p>配置写入当前工作区后，「执行注入」将使用此配置。输入 URL、JWT、Cookie、开始/结束节点后点击「加载配置」即可。</p>
    <h3 style="font-size:1rem;margin:0 0 0.5rem 0;color:var(--natsume-ink);">平台配置</h3>
    <label>智慧树页面 URL（可从 URL 提取课程/任务 ID）</label>
    <input type="text" id="cfgLoadUrl" placeholder="能力训练界面URL">
    <label>JWT（PLATFORM_AUTHORIZATION）</label>
    <input type="text" id="cfgAuthorization" placeholder="">
    <label>Cookie</label>
    <input type="text" id="cfgCookie" placeholder="">
    <label>开始节点（PLATFORM_START_NODE_ID）</label>
    <input type="text" id="cfgStartNodeId" placeholder="">
    <label>结束节点（PLATFORM_END_NODE_ID）</label>
    <input type="text" id="cfgEndNodeId" placeholder="">
    <div class="gen-cards-row" style="margin-top:0.5rem;">
      <button type="button" id="btnLoadConfig" class="btn-primary">加载配置</button>
    </div>
    <div id="configMsg" class="msg"></div>

    <h3 style="font-size:1rem;margin:1.25rem 0 0.5rem 0;color:var(--natsume-ink);">注入平台</h3>
    <p class="hint" style="margin-top:0;"></p>
    <label>卡片文件</label>
    <input type="text" id="injectCardsPath" class="path-drop-target" placeholder="从工作区文件列表拖入或点击文件填入">
    <label>任务名称（可选）</label>
    <input type="text" id="injectTaskName" placeholder="">
    <label>任务描述（可选）</label>
    <input type="text" id="injectDescription" placeholder="">
    <div class="gen-cards-row" style="margin-top:0.5rem;">
      <button id="btnInjectPreview">预览注入</button>
      <button id="btnInjectRun">执行注入</button>
    </div>
    <div id="injectMsg" class="msg"></div>
    <pre id="injectResult" style="display:none;"></pre>
    <datalist id="cardsPathOptions"></datalist>
  </div>
  </section>
  </div>

  <button type="button" id="simSidebarTab" class="sim-sidebar-tab" title="展开仿真侧边栏" aria-label="展开仿真侧边栏">
    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="16" rx="2"/><line x1="8" y1="4" x2="8" y2="20"/></svg>
  </button>
  <aside id="simSidebar" class="sim-sidebar">
    <div id="simSidebarResizeHandle" class="sim-sidebar-resize-handle" title="拖拽调整宽度"></div>
    <div class="sim-sidebar-head">
      <button type="button" id="simSidebarClose" class="sim-sidebar-collapse-btn" title="收起侧边栏" aria-label="收起侧边栏">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="16" rx="2"/><line x1="16" y1="4" x2="16" y2="20"/></svg>
      </button>
      <h3>项目与优化</h3>
    </div>
    <div class="sim-sidebar-body">
      <div class="workspace-files-subsection" style="margin-bottom:1rem;">
        <div class="sim-progress-title" style="display:flex;align-items:center;justify-content:space-between;gap:0.5rem;">
          <span>工作区文件</span>
          <button type="button" id="btnRefreshWorkspaceFiles" class="btn-secondary" style="font-size:0.8rem;padding:0.2rem 0.5rem;" title="刷新列表">刷新</button>
        </div>
        <div id="workspaceFileList" class="file-list workspace-file-list" style="max-height:180px;overflow-y:auto;"></div>
      </div>
      <div class="sim-progress">
        <div class="sim-progress-title">项目进度</div>
        <div id="simProgressList">
          <div class="sim-progress-item" data-step="1"><span>○</span> 1. 剧本解析</div>
          <div class="sim-progress-item" data-step="2"><span>○</span> 2. 卡片生成</div>
          <div class="sim-progress-item" data-step="3"><span>○</span> 3. 闭环优化</div>
          <div class="sim-progress-item" data-step="4"><span>○</span> 4. 注入平台</div>
        </div>
      </div>
      <div class="closed-loop-subsection" style="margin-top:1rem;">
        <h4 style="font-size:0.95rem;margin:0 0 0.5rem 0;">闭环优化</h4>
        <p class="hint" style="font-size:0.85rem;">多轮生成→仿真→评估，优化卡片质量。</p>
        <label style="margin-top:0.4rem;">Rounds</label>
        <div style="display:flex;flex-wrap:wrap;align-items:center;gap:0.5rem;">
          <label class="opt-checkbox-wrap" style="margin:0;"><input type="radio" name="optimizerRoundsMode" value="default" checked class="opt-checkbox"> 默认</label>
          <label class="opt-checkbox-wrap" style="margin:0;"><input type="radio" name="optimizerRoundsMode" value="custom" class="opt-checkbox"></label>
          <input type="number" id="optimizerMaxRoundsInput" min="1" max="99" value="1" style="width:5rem;">
        </div>
        <label style="margin-top:0.4rem;">人设</label>
        <div style="display:flex;gap:0.35rem;align-items:center;flex-wrap:wrap;">
          <select id="personaId" style="flex:1;min-width:8rem;"></select>
          <button type="button" id="btnEditPersona" class="btn-secondary" title="编辑当前人设">编辑人设</button>
          <button type="button" id="btnAddNewPersona" class="btn-secondary" title="添加新人设">添加新人设</button>
        </div>
        <p class="hint" style="font-size:0.8rem;margin:0.25rem 0 0;"></p>
        <label style="margin-top:0.4rem;">优化器</label>
        <select id="optimizerType" style="width:100%;"><option value="bootstrap">bootstrap</option><option value="mipro">mipro</option></select>
        <div class="btn-row-right" style="margin-top:0.5rem;">
          <button type="button" id="btnRunOptimizer" class="btn-primary">运行优化</button>
        </div>
        <div id="optimizerProgressWrap" style="display:none;margin-top:0.5rem;">
          <div style="display:flex;justify-content:space-between;font-size:0.85rem;color:var(--natsume-ink-light);">
            <span id="optimizerProgressMsg">准备中…</span>
            <span id="optimizerProgressPct">0%</span>
          </div>
          <div style="height:6px;background:var(--natsume-border);border-radius:3px;overflow:hidden;margin-top:0.25rem;">
            <div id="optimizerProgressBar" style="height:100%;width:0%;background:var(--natsume-leaf);transition:width 0.3s;"></div>
          </div>
        </div>
        <div id="optimizerMsg" class="msg"></div>
        <pre id="optimizerResult" style="display:none;font-size:0.8rem;max-height:120px;"></pre>
      </div>
    </div>
  </aside>
  </div>
  </div>

  <div id="globalLoadingOverlay" aria-live="polite" aria-busy="false" role="status">
    <div class="global-loading-spinner" aria-hidden="true"></div>
    <div id="globalLoadingText" class="global-loading-text">处理中…</div>
  </div>

  <script src="/static/js/common.js"></script>
  <script src="/static/js/auth.js"></script>
  <script src="/static/js/settings.js"></script>
  <script src="/static/js/app.js"></script>
</body>
</html>

</html>

</html>

</html>

</html>

</html>
