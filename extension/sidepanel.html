<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <link rel="stylesheet" href="sidepanel.css">
</head>
<body>
  <h1>EduFlow 卡片注入</h1>
  <div id="tab-status" class="tab-status"></div>
  <details id="eduflow-details" class="llm-details">
    <summary>EduFlow 后端（DSPy 生成）</summary>
    <div class="llm-fields">
      <label>API 地址（可选，默认已配置）</label>
      <input type="text" id="eduflow-api-url" placeholder="https://eduflows.cn" />
      <p class="hint">默认 eduflows.cn。若本地运行网站，建议改为 http://localhost:端口，可获得与网站相同的 DSPy 生成质量。</p>
    </div>
  </details>
  <div class="drop-zone" id="drop-zone">
    <p>拖入 .md / .docx / .pdf 剧本文件，或点击选择</p>
    <input type="file" id="file-input" accept=".md,.docx,.pdf" hidden />
  </div>
  <div id="file-status" class="status"></div>
  <button type="button" id="btn-generate" class="btn btn-primary" disabled>生成卡片</button>
  <div id="generate-status" class="status"></div>
  <div id="generate-progress" class="progress" style="display:none;">
    <div class="progress-text" id="progress-text">加载中...</div>
    <div class="progress-bar"><div class="progress-fill" id="progress-fill"></div></div>
  </div>
  <div id="cards-ready" class="cards-ready" style="display:none;">
    <p id="cards-summary"></p>
    <details class="cards-preview-wrap">
      <summary>预览生成的卡片</summary>
      <pre id="cards-preview" class="cards-preview"></pre>
    </details>
    <button type="button" id="btn-inject" class="btn btn-primary">注入平台</button>
  </div>
  <div id="inject-status" class="status"></div>
  <script src="sidepanel.js"></script>
</body>
</html>
